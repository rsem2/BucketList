<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript">
        function showFriends() {
            document.getElementById('friend_list').style.display = "block";
        }
    </script>
</head>
<body>
    <h1>{{ activity.idea.title }}</h1>    
    <h2>{{ activity.idea.description }}</h2>
    <h3>Deadline: {{ activity.date }}</h3>
    <h3>Created by: {{ activity.activity_creator.first_name }} {{ activity.activity_creator.last_name }}</h3>
    <h3>Who has been tagged?</h3>
    {% for person in people %}
        <p>{{ person.first_name}} {{ person.last_name }} <a href='/dashboard/remove_person/{{activity.id}}/{{person.id}}'>Untag</a></p>
    {% endfor %} 
        
    <button onclick="showFriends()">Tag more people?</button>
    <form action='/dashboard/add_people/{{activity.id}}' method='post' id="friend_list" style="display:none;">
        {% csrf_token %} 
        <div style="height: 6em; width: 12em; overflow: auto;">
            {% for friend in friends %}
                <input type="checkbox" name="people[]" value={{friend.id}}> {{ friend.first_name }} {{friend.last_name}}<br>
            {% endfor %}
        </div>
        <input type="submit" value="Add people to the activity">
    </form>

    <h3>Posts</h3>
    {% for post in posts %}
        <p>{{ post.user.first_name }} says - {{ post.post }}</p>
        <p>Date added: {{ post.created_at|date:"d F Y" }}</p>
    {% endfor %}

    <h3>Add a post</h3>
    <form action="/dashboard/submit_post/{{activity.id}}" method = 'post'>
        {% csrf_token %}
        <textarea name="post" cols="90" rows="6"></textarea><br>
        <input type="submit" value="Add Post">
    </form>

</body>
</html>